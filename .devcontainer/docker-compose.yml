version: "3.8"

services:
  dev:
    image: mcr.microsoft.com/devcontainers/base:ubuntu
    container_name: devbox-dev
    volumes:
      - ..:/workspaces/devbox:cached
    command: sleep infinity

  ttyd:
    image: tsl0922/ttyd:latest
    container_name: devbox-ttyd
    command: ["-p", "7681", "bash"]
    depends_on:
      - dev
    network_mode: service:dev

  # Platzhalter für später:
  # opencode-api:
  #   image: ghcr.io/opencode-ai/opencode:latest
  #   ports:
  #     - "127.0.0.1:3001:3001"
  #
  # opencode-web:
  #   image: ghcr.io/chris-tse/opencode-web:latest
  #   environment:
  #     - OPENCODE_API_URL=http://opencode-api:3001
  #   ports:
  #     - "127.0.0.1:3000:3000"