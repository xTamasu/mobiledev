version: "3.8"

services:
  dev:
    image: mcr.microsoft.com/devcontainers/base:ubuntu
    container_name: devbox-dev
    volumes:
      - ..:/workspaces/devbox:cached
    command: sleep infinity

  ttyd:
    image: tsl0922/ttyd:latest
    command: ["ttyd", "--writable", "-p", "7681", "bash"]
    ports:
      - "127.0.0.1:17681:7681"

  opencode:
    image: ghcr.io/anomalyco/opencode
    environment:
      - OPENCODE_SERVER_PASSWORD=${OPENCODE_SERVER_PASSWORD:-changeme}
    command: ["web", "--hostname", "0.0.0.0", "--port", "4096"]
    ports:
      - "127.0.0.1:14096:4096"